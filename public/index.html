<!DOCTYPE html>
<html>
<head>
<script src="https://code.jquery.com/jquery-2.2.3.min.js" integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous"></script>
<script>
var startoff = new Date('2016 April 18 0:00:00').getTime();
var off = new Date().getTime() - startoff;

$(document).ready(function() {

  var person = window.location.search.substring(3);
  $(document).prop('title', person);

  $('video').on('ended',function(){
    $(this).css('opacity', 0);
  });

  setInterval(updateClips, 1000);
  function updateClips() {
    //off = new Date().getTime() - startoff;
    $.getJSON('/get_clips?off='+off, function(data) {
      console.log(data)
      for (var i=0; i<data.length; i++) {        
        if (person === data[i].person) {
          var elt = $('#'+data[i].type);
          if (elt.attr('src') !== data[i].path) {
            elt.css('opacity', 1);
            elt.attr('src', data[i].path);
          }
        }
      }
    });
  }
});

</script>
<style>
body {
  margin: 0;
  padding: 0;
}
video {
  width: 50%;
  float: left;
}
</style>
</head>

<body>
<video id='watching' autoplay></video>
<video id='watched' autoplay></video>
</body>
</html>